#!/usr/bin/env python3

try:
    from ttk import Treeview, Scrollbar, Frame, Style
    from Tkconstants import HORIZONTAL, VERTICAL, N,S,E,W, END
except ImportError:
    from tkinter.ttk import Treeview, Scrollbar, Frame, Style
    from tkinter.constants import HORIZONTAL, VERTICAL, N,S,E,W, END

import xml.etree.ElementTree as ET

import tkinter as tk
from operator import attrgetter

class XML_Viewer(Frame):

    def __init__(self, master, xml=None, heading_text=None, heading_anchor=None, padding=None, cursor=None, takefocus=None, style=None):
        Frame.__init__(self, master, class_="XML_Viewer")

        kwargs = {}
        self._create_style()

        if style is not None:
            kwargs["style"] = style

        if padding is not None:
            kwargs["padding"] = padding

        if cursor is not None:
            kwargs["cursor"] = cursor

        if takefocus is not None:
            kwargs["takefocus"] = takefocus

        self._searchcriteria = tk.StringVar()
        self._searchcriteria.trace_add("write", self._on_type)
        self._searchbar = tk.Entry(self, textvariable = self._searchcriteria)
        self._searchbar.pack(fill=tk.X, expand=False)

        self._treeview = Treeview(self, **kwargs)
        self._treeview.heading("#0", text=heading_text)

        self._treeview.bind("<<TreeviewOpen>>", self._on_open)
        self._treeview.bind("<<TreeviewClose>>", self._on_close)

        self._element_tree = None
        self._item_ID_to_element = {}

        if xml is not None:
            self.parse_xml(xml)

        self._treeview.pack(fill='both', expand=True)

    def _on_type(self, var_name: str, var_index: str, operation: str):
        self.clear()
        self._walk_xml(self._element_tree.getroot(), search=self._searchcriteria.get())

    def _on_open(self, event):
        item_ID = self._treeview.focus()
        if item_ID not in self._item_ID_to_element: return

        node = self._item_ID_to_element[item_ID]

        self._treeview.item(item_ID, text = self._tag_name(node))

    def _on_close(self, event):
        item_ID = self._treeview.focus()
        if item_ID not in self._item_ID_to_element: return

        node = self._item_ID_to_element[item_ID]

        text = self._tag_name(node)
        self._treeview.item(item_ID, text = text)

    def parse_xml(self, xml):
        self._element_tree = ET.ElementTree(ET.fromstring(xml))

        self.clear()
        self._walk_xml(self._element_tree.getroot())

    @property
    def element_tree(self):
        return self._element_tree

    @element_tree.setter
    def element_tree(self, element_tree):
        self._element_tree = element_tree

        self.clear()
        self._walk_xml(element_tree.getroot())

    def clear(self):
        self._item_ID_to_element = {}
        self._treeview.delete(*self._treeview.get_children())

    def _tag_name(self, node):
        if node.tag == "node":
            keys = node.attrib.keys()
            if "class" in keys:
                text = f'[{node.attrib["class"]}]'
            elif "resource-id" in keys:
                text = f'[{node.attrib["resource-id"]}]'
            else:
                text = f'[{node.tag}]'
        else:
            text = f'[{node.tag}]'

        return text

    def _add_valid_property(self, attrs, reference, name, parent):
        if reference in attrs and len(attrs[reference]) > 0:
            self._treeview.insert(parent, END, text = f'{name}="{attrs[reference]}"')

    def _add_attrs_as_children(self, node, item, search=""):
        result = False
        attrs = node.attrib

        a_names = list(attrs.keys())
        a_names.sort()

        if len(a_names) > 0:
            self._add_valid_property(attrs, "resource-id", "id", item)
            self._add_valid_property(attrs, "text", "text", item)
            self._add_valid_property(attrs, "content-desc", "content-desc", item)

            parent = self._treeview.insert(item, END, text = "attributes")
            for a_name in a_names:
                text = f'{a_name}="{attrs[a_name]}"'
                if len(search) > 1 and search in text:
                    result = True
                self._treeview.insert(parent, END, text = text)
        return result

    def _walk_xml(self, node, depth=0, parent="", search=""):
        node_name = self._tag_name(node)

        item = self._treeview.insert(parent, END, text = node_name, open=True)
        self._item_ID_to_element[item] = node

        if node.text:
            text = node.text.strip()
            if text != "":
                for line in text.splitlines():
                    self._treeview.insert(item, END, text = line)

        found_in_attr = self._add_attrs_as_children(node, item, search)

        if len(search) > 1:
            if found_in_attr or search in node_name:
                self._treeview.selection_add(item)
            elif node.text and search in node.text:
                self._treeview.selection_add(item)

        child_nodes = sorted(list(node), key=attrgetter('tag'))
        for child_node in node:
            self._walk_xml(child_node, depth+1, parent=item, search=search)

        if node.tail:
            tail = node.tail.strip()
            if tail != "":
                for line in tail.splitlines():
                    self._treeview.insert(parent, index='end', text = line)

    def _create_style(self):
        style = Style()

        style.configure("Treeview",
            background="black",
            foreground="white",
            fieldbackground="black",
            rowheight=25,
        )

        style.map("Treeview",
            background=[('selected', 'green')]
        )

        return style

if __name__ == "__main__":
    try:
        from Tkinter import Tk
    except ImportError:
        from tkinter import Tk

    root = Tk()
    root.geometry("800x600")
    xml = """
    <hierarchy rotation="0"><node index="0" text="" resource-id="" class="android.widget.FrameLayout" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][1080,2160]"><node index="0" text="" resource-id="" class="android.widget.LinearLayout" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][1080,2160]"><node index="0" text="" resource-id="" class="android.widget.FrameLayout" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][1080,2160]"><node index="0" text="" resource-id="com.spotify.music:id/action_bar_root" class="android.widget.LinearLayout" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][1080,2160]"><node index="0" text="" resource-id="android:id/content" class="android.widget.FrameLayout" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][1080,2160]"><node index="0" text="" resource-id="com.spotify.music:id/main_content" class="android.widget.FrameLayout" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][1080,2160]"><node index="0" text="" resource-id="com.spotify.music:id/screensaver_ad_container" class="android.widget.FrameLayout" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][1080,2160]" /><node index="1" text="" resource-id="com.spotify.music:id/preview_container" class="android.widget.FrameLayout" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][1080,2160]" /><node index="2" text="" resource-id="com.spotify.music:id/quicksilver_note_container" class="android.widget.FrameLayout" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][1080,2160]" /><node index="3" text="" resource-id="com.spotify.music:id/quicksilver_card_container" class="android.widget.FrameLayout" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][1080,2160]" /><node index="4" text="" resource-id="com.spotify.music:id/partner_account_linking_dialog_card_container" class="android.widget.FrameLayout" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][1080,2160]" /><node index="5" text="" resource-id="com.spotify.music:id/content" class="android.view.ViewGroup" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][1080,2160]"><node index="2" text="" resource-id="com.spotify.music:id/tooltip_container" class="android.widget.FrameLayout" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][1080,2160]" /><node index="3" text="" resource-id="com.spotify.music:id/fragment_container" class="android.widget.FrameLayout" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][1080,2160]"><node index="0" text="" resource-id="com.spotify.music:id/page_loader_view" class="android.view.ViewGroup" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][1080,2160]"><node index="0" text="" resource-id="com.spotify.music:id/content" class="android.widget.FrameLayout" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][1080,2160]"><node index="0" text="" resource-id="com.spotify.music:id/header_holder" class="android.widget.FrameLayout" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][1080,2160]"><node index="0" text="" resource-id="com.spotify.music:id/coordinator_layout" class="android.view.ViewGroup" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][1080,2160]"><node index="0" text="" resource-id="com.spotify.music:id/app_bar_layout" class="android.widget.LinearLayout" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="true" focused="true" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][1080,1005]"><node index="0" text="" resource-id="com.spotify.music:id/collapsing_toolbar" class="android.widget.FrameLayout" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][1080,1005]"><node index="0" text="" resource-id="com.spotify.music:id/content_container" class="android.view.ViewGroup" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][1080,1005]"><node index="0" text="" resource-id="com.spotify.music:id/artwork_shadow" class="android.view.View" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,189][662,939]" /><node index="1" text="" resource-id="com.spotify.music:id/artwork" class="android.widget.ImageView" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[44,321][530,807]" /><node index="2" text="Science Vs" resource-id="com.spotify.music:id/showName" class="android.widget.TextView" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[574,386][1036,664]" /><node index="3" text="" resource-id="com.spotify.music:id/publisher" class="android.widget.TextView" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[574,697][1036,743]" /><node index="4" text="" resource-id="com.spotify.music:id/action_row_container" class="android.view.ViewGroup" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,851][1080,1005]"><node index="0" text="Follow" resource-id="com.spotify.music:id/follow_button" class="android.widget.Button" package="com.spotify.music" content-desc="Follow this Show" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[44,887][221,969]" /><node index="1" text="" resource-id="com.spotify.music:id/quick_action_section" class="android.widget.LinearLayout" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[221,862][485,994]"><node index="0" text="" resource-id="com.spotify.music:id/notify_button" class="android.widget.ImageButton" package="com.spotify.music" content-desc="Enable notifications for new episodes of Science Vs." checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[254,862][386,994]" /><node index="1" text="" resource-id="com.spotify.music:id/settings_button" class="android.widget.ImageButton" package="com.spotify.music" content-desc="Settings for this Show." checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[397,884][485,972]" /></node><node index="2" text="" resource-id="com.spotify.music:id/context_menu_button" class="android.widget.ImageButton" package="com.spotify.music" content-desc="More options for show Science Vs" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[529,884][617,972]" /></node></node><node index="2" text="" resource-id="com.spotify.music:id/back_button" class="android.widget.ImageButton" package="com.spotify.music" content-desc="Back" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[28,178][116,266]" /></node></node><node index="1" text="" resource-id="" class="android.view.View" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,1005][1080,2160]" /><node index="2" text="" resource-id="com.spotify.music:id/recycler_view" class="androidx.recyclerview.widget.RecyclerView" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="true" focused="false" scrollable="true" long-clickable="false" password="false" selected="false" bounds="[0,1005][1080,2160]"><node index="0" text="" resource-id="" class="android.widget.LinearLayout" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,1005][1080,1131]"><node index="0" text="There are a lot of fads, blogs and strong opinions, but then there&#8217;s SCIENCE. Science Vs is the show from Gi&#8230;&#160;see&#160;more" resource-id="com.spotify.music:id/txt_description" class="android.widget.TextView" package="com.spotify.music" content-desc="There are a lot of fads, blogs and strong opinions, but then there&#8217;s SCIENCE. Science Vs is the show from Gi" checkable="false" checked="false" clickable="false" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[44,1027][1036,1131]" /></node><node index="1" text="" resource-id="" class="androidx.recyclerview.widget.RecyclerView" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="true" focused="false" scrollable="true" long-clickable="false" password="false" selected="false" bounds="[0,1131][1080,1267]"><node index="0" text="4.3 &#61770; (3K)" resource-id="com.spotify.music:id/ratingButton" class="android.widget.Button" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[44,1175][312,1267]" /><node index="1" text="Health" resource-id="" class="android.widget.Button" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[367,1175][566,1267]" /><node index="2" text="Science" resource-id="" class="android.widget.Button" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[588,1175][810,1267]" /><node index="3" text="Educational podcasts" resource-id="" class="android.widget.Button" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[832,1175][1080,1267]" /></node><node index="2" text="" resource-id="" class="android.view.ViewGroup" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,1267][1080,1575]"><node index="0" text="" resource-id="com.spotify.music:id/container" class="android.view.ViewGroup" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[44,1311][1036,1553]"><node index="0" text="" resource-id="android:id/icon" class="android.widget.ImageView" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[77,1344][253,1520]" /><node index="1" text="Let&#8217;s Do Science Again!!" resource-id="android:id/text1" class="android.widget.TextView" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[253,1381][915,1437]" /><node index="2" text="TRAILER 2 MIN 36 SEC" resource-id="android:id/text2" class="android.widget.TextView" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[253,1448][915,1484]" /><node index="3" text="" resource-id="com.spotify.music:id/accessory" class="android.widget.LinearLayout" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[915,1366][1003,1498]"><node index="0" text="" resource-id="" class="android.widget.ImageButton" package="com.spotify.music" content-desc="More options for episode Let&#8217;s Do Science Again!!" checkable="false" checked="false" clickable="true" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[915,1366][1003,1498]" /></node></node></node><node index="3" text="" resource-id="" class="android.view.ViewGroup" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,1575][1080,1729]"><node index="0" text="All episodes" resource-id="com.spotify.music:id/title" class="android.widget.TextView" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[44,1621][860,1684]" /><node index="1" text="Sort" resource-id="com.spotify.music:id/button" class="android.widget.Button" package="com.spotify.music" content-desc="Sort" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[860,1608][1036,1696]" /></node><node index="4" text="" resource-id="com.spotify.music:id/row_root" class="android.view.ViewGroup" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="true" password="false" selected="false" bounds="[0,1729][1080,2160]"><node index="0" text="" resource-id="com.spotify.music:id/header" class="android.view.ViewGroup" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[44,1776][1036,1908]"><node index="0" text="" resource-id="com.spotify.music:id/artwork" class="android.widget.ImageView" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[44,1776][176,1908]" /><node index="1" text="Here&#8217;s What&#8217;s Coming Up!" resource-id="com.spotify.music:id/title" class="android.widget.TextView" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[209,1814][1036,1870]" /></node><node index="1" text="" resource-id="com.spotify.music:id/description_view" class="android.view.ViewGroup" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[44,1941][1036,2033]"><node index="0" text="There&#8217;s tons of misinformation, fads and strong opinions floating around out there &#8212; but then there&#8217;s SCIENCE. Find it here! Learn more about your ad choices. Visit podcastchoices.com/adchoices" resource-id="com.spotify.music:id/description" class="android.widget.TextView" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[44,1941][1036,2033]" /></node><node index="2" text="" resource-id="com.spotify.music:id/metadata_container" class="android.widget.LinearLayout" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[44,2066][1036,2112]"><node index="0" text="Fri &#8226; 2 min" resource-id="com.spotify.music:id/published_label" class="android.widget.TextView" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[44,2066][206,2112]" /></node><node index="3" text="" resource-id="com.spotify.music:id/quick_action_section" class="android.widget.LinearLayout" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[11,2123][926,2160]"><node index="0" text="" resource-id="" class="android.widget.FrameLayout" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[11,2123][143,2160]"><node index="0" text="" resource-id="" class="android.widget.ImageButton" package="com.spotify.music" content-desc="Add Here&#8217;s What&#8217;s Coming Up! to Your Episodes" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[44,2156][110,2160]" /></node><node index="1" text="" resource-id="" class="android.widget.FrameLayout" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[143,2123][275,2160]"><node index="0" text="" resource-id="" class="android.widget.ImageButton" package="com.spotify.music" content-desc="Download episode: Here&#8217;s What&#8217;s Coming Up!" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[176,2156][242,2160]" /></node><node index="2" text="" resource-id="" class="android.widget.FrameLayout" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[275,2123][407,2160]"><node index="0" text="" resource-id="" class="android.widget.ImageButton" package="com.spotify.music" content-desc="Share" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[308,2156][374,2160]" /></node><node index="3" text="" resource-id="" class="android.widget.FrameLayout" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[407,2123][539,2160]"><node index="0" text="" resource-id="" class="android.widget.ImageButton" package="com.spotify.music" content-desc="More options for episode Here&#8217;s What&#8217;s Coming Up!" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[440,2156][506,2160]" /></node></node><node index="4" text="" resource-id="com.spotify.music:id/play_element" class="android.view.ViewGroup" package="com.spotify.music" content-desc="Play episode: Here&#8217;s What&#8217;s Coming Up!" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[948,2145][1036,2160]"><node index="0" text="" resource-id="com.spotify.music:id/button_play_and_pause" class="android.widget.ImageButton" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[948,2145][1036,2160]" /></node><node index="5" text="" resource-id="com.spotify.music:id/bottom_divider" class="android.view.View" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][0,0]" /></node><node index="5" text="" resource-id="com.spotify.music:id/row_root" class="android.view.ViewGroup" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="true" password="false" selected="false" bounds="[0,0][0,0]" /></node></node></node></node></node></node><node index="4" text="" resource-id="com.spotify.music:id/bottom_gradient" class="android.view.View" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,1839][1080,2160]" /><node index="5" text="" resource-id="com.spotify.music:id/anchor_bar_bottom" class="android.view.ViewGroup" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,1971][1080,2147]"><node index="0" text="" resource-id="com.spotify.music:id/now_playing_bar_anchor_item" class="android.widget.FrameLayout" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,1971][1080,2147]"><node index="0" text="" resource-id="com.spotify.music:id/now_playing_bar_layout" class="android.view.ViewGroup" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[22,1971][1058,2125]"><node index="0" text="" resource-id="com.spotify.music:id/content_container" class="android.widget.FrameLayout" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[22,1971][154,2125]"><node index="0" text="" resource-id="com.spotify.music:id/cover_image" class="android.widget.ImageView" package="com.spotify.music" content-desc="The cover art of the currently playing track" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[44,1993][154,2103]" /></node><node index="1" text="" resource-id="com.spotify.music:id/tracks_carousel_view" class="androidx.recyclerview.widget.RecyclerView" package="com.spotify.music" content-desc="Show Now Playing" checkable="false" checked="false" clickable="false" enabled="true" focusable="true" focused="false" scrollable="true" long-clickable="false" password="false" selected="false" bounds="[187,1971][816,2125]"><node index="0" text="" resource-id="" class="android.view.ViewGroup" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[187,1971][816,2125]"><node index="0" text="" resource-id="com.spotify.music:id/track_info_view" class="android.widget.LinearLayout" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[187,2002][816,2094]"><node index="0" text="The Shadow" resource-id="com.spotify.music:id/track_info_view_title" class="android.widget.TextView" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="true" bounds="[187,2002][395,2048]" /><node index="1" text="Dateline NBC" resource-id="com.spotify.music:id/track_info_view_subtitle" class="android.widget.TextView" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="true" bounds="[187,2048][408,2094]" /></node></node></node><node index="2" text="" resource-id="" class="android.widget.LinearLayout" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[187,2025][816,2071]" /><node index="3" text="" resource-id="com.spotify.music:id/connect_destination_button" class="android.widget.ImageButton" package="com.spotify.music" content-desc="Connect to a device. Opens the devices menu" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[816,1993][926,2103]" /><node index="4" text="" resource-id="com.spotify.music:id/play_pause_button" class="android.widget.ImageButton" package="com.spotify.music" content-desc="Play" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[926,1993][1036,2103]" /><node index="5" text="" resource-id="com.spotify.music:id/progress_bar" class="android.widget.ProgressBar" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[22,2119][1058,2125]" /></node></node></node><node index="6" text="" resource-id="com.spotify.music:id/navigation_bar" class="android.widget.FrameLayout" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,2147][1080,2160]"><node index="0" text="" resource-id="" class="android.widget.LinearLayout" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,2147][1080,2160]"><node index="0" text="" resource-id="com.spotify.music:id/home_tab" class="android.widget.LinearLayout" package="com.spotify.music" content-desc="Home, Tab 1 of 3" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[88,2147][389,2160]"><node index="0" text="" resource-id="com.spotify.music:id/bottom_navigation_item_icon" class="android.widget.ImageView" package="com.spotify.music" content-desc="Home" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][0,0]" /><node index="1" text="Home" resource-id="com.spotify.music:id/bottom_navigation_item_title" class="android.widget.TextView" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][0,0]" /></node><node index="1" text="" resource-id="com.spotify.music:id/search_tab" class="android.widget.LinearLayout" package="com.spotify.music" content-desc="Search, Tab 2 of 3" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="true" bounds="[389,2147][690,2160]"><node index="0" text="" resource-id="com.spotify.music:id/bottom_navigation_item_icon" class="android.widget.ImageView" package="com.spotify.music" content-desc="Search" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="true" bounds="[0,0][0,0]" /><node index="1" text="Search" resource-id="com.spotify.music:id/bottom_navigation_item_title" class="android.widget.TextView" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="true" bounds="[0,0][0,0]" /></node><node index="2" text="" resource-id="com.spotify.music:id/your_library_tab" class="android.widget.LinearLayout" package="com.spotify.music" content-desc="Your Library, Tab 3 of 3" checkable="false" checked="false" clickable="true" enabled="true" focusable="true" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[690,2147][992,2160]"><node index="0" text="" resource-id="com.spotify.music:id/bottom_navigation_item_icon" class="android.widget.ImageView" package="com.spotify.music" content-desc="Your Library" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][0,0]" /><node index="1" text="Your Library" resource-id="com.spotify.music:id/bottom_navigation_item_title" class="android.widget.TextView" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][0,0]" /></node></node></node></node></node></node></node></node></node><node index="1" text="" resource-id="android:id/statusBarBackground" class="android.view.View" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][1080,145]" /><node index="2" text="" resource-id="android:id/navigationBarBackground" class="android.view.View" package="com.spotify.music" content-desc="" checkable="false" checked="false" clickable="false" enabled="true" focusable="false" focused="false" scrollable="false" long-clickable="false" password="false" selected="false" bounds="[0,0][0,0]" /></node></hierarchy>"""
    XML_Viewer(root, xml, heading_text="Stuff").pack(fill='both', expand=True)
    root.mainloop()
